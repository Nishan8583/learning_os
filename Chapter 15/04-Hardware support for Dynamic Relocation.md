### Key Notes on Hardware Support for Dynamic Relocation

1. **CPU Modes**:
    
    - **Privileged Mode (Kernel Mode)**:
        - The OS runs in this mode with full access to the hardware.
    - **User Mode**:
        - Applications run in this restricted mode, with limited access to hardware.
    - **Mode Switching**:
        - A single **mode bit** in the processor status word indicates the current mode.
        - The CPU switches to privileged mode during **system calls**, **exceptions**, or **interrupts**.
2. **Base and Bounds Registers**:
    
    - Each CPU has a **pair of registers** (base and bounds) as part of the **Memory Management Unit (MMU)**.
    - **Base Register**:
        - Translates virtual addresses by adding the base value to the virtual address generated by the program.
    - **Bounds Register**:
        - Ensures the translated address is within the allocated memory range.
    - **Hardware Circuitry**:
        - Performs address translation and bounds checking.
3. **Privileged Instructions**:
    
    - Special instructions allow the OS to:
        - **Modify Base and Bounds Registers**:
            - Only the OS in privileged mode can update these registers.
            - Prevents user processes from wreaking havoc by arbitrarily changing these values.
        - **Set Exception Handlers**:
            - The OS informs the hardware of the code to run when exceptions occur.
4. **Exception Handling**:
    
    - The CPU must raise exceptions in the following cases:
        - **Out-of-Bounds Memory Access**:
            - Stops the user program and runs the OS’s "out-of-bounds" exception handler.
        - **Unauthorized Privileged Operations**:
            - If a user program attempts to modify base/bounds registers or execute privileged instructions, the CPU raises an exception.
    - The OS exception handler determines the appropriate response, often terminating the offending process.
5. **Free Memory Management**:
    
    - The OS uses a **free list** data structure to track unused memory ranges.
    - This allows efficient allocation of memory to processes.
6. **Hardware Requirements Summary**:
    
    - **Privileged Mode**: Prevents user-mode processes from executing privileged operations.
    - **Base/Bounds Registers**: Supports address translation and bounds checking.
    - **Translation Circuitry**: Translates virtual addresses and checks bounds.
    - **Privileged Instructions**: Allows the OS to update base/bounds registers and set exception handlers.
    - **Exception Handling**: Detects and handles illegal memory access or privileged instruction violations.
7. **Key Takeaway**:
    
    - Hardware support for dynamic relocation ensures efficient memory virtualization, robust protection against unauthorized access, and seamless exception handling, enabling safe and reliable process execution.